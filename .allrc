# -*- mode: shell-script -*-
#
# .allrc should be sourced by all shells at the end of it's rc_file
#
# Functions in here should be POSIX compliant and must at least work
# with at least zsh and bash.
#
# Targeted systems include: Ubuntu Linux, MacOSX, Solaris (OmniOS)
#
# PATH
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
PATH="$HOME/bin:$PATH" # override system paths from ~/bin
export PATH

# explicitly inherit from /etc/manpath.config
export MANPATH="$(manpath)"
export PAGER=less

# locale
export LANG=en_US.UTF-8

# http://stackoverflow.com/questions/592620/check-if-a-program-exists-from-a-bash-script
# portable way to check if a function exists on $PATH
function exists-p {
    command -v $1 >/dev/null 2>&1
}

# use emacs if available
if exists-p emacs
then
    export EDITOR="emacs -nw -q"
    export SUDO_EDITOR="emacs -nw -q"
fi

if [[ -d ~/.shell.d ]]
then
    # source shell functions
    for file in ~/.shell.d/*.sh
    do
        source "$file"
    done
fi
